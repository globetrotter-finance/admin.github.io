{"version":3,"file":"js/779.73e44329.js","mappings":"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","sources":["webpack://@coreui/coreui-pro-vue-admin-template/./src/views/pages/Login.vue","webpack://@coreui/coreui-pro-vue-admin-template/./src/views/pages/Login.vue?30a0"],"sourcesContent":["<template>\n  <div class=\"bg-light min-vh-100 d-flex flex-row align-items-center bg-pattern3-repeat\">\n    <CContainer>\n      <CRow class=\"justify-content-center\">\n        <CCol :xs=\"12\" :xm=\"4\" :xl=\"4\">\n\n            <CCard class=\"p-4 customcard-border-primary\">\n              <CCardBody>\n                <CForm\n                  class=\"needs-validation\"\n                  novalidate\n                  :validated=\"validatedCustom01\"\n                  @submit=\"handleSubmitCustom01\"\n                  @submit.prevent=\";\"\n                >\n                  <img class=\"d-block w-100 mb-4\" :src=\"ccMainLogo\" alt=\"Globetrotter finance logo\" />\n\n                  <div v-if=\"this.checkCredentialsSpin == true\">\n                    <p class=\"text-medium-emphasis mb-3\">Checking credentials</p>\n                    <CSpinner color=\"primary\" size=\"sm\" />\n                  </div>\n\n                  <div v-if=\"this.checkCredentialsSpin == false\">\n                    <p class=\"text-medium-emphasis mb-3\">Enter credentials to continue</p>\n                    <CInputGroup class=\"mb-3\">\n                      <CInputGroupText>\n                        <CIcon icon=\"cil-user\" />\n                      </CInputGroupText>\n                      <CFormInput\n                        placeholder=\"Username\"\n                        autocomplete=\"username\"\n                        v-model=\"username\"\n                        required\n                      />\n                    </CInputGroup>\n\n\n                    <CInputGroup class=\"mb-3\">\n                      <CInputGroupText>\n                        <CIcon icon=\"cil-lock-locked\" />\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        autocomplete=\"current-password\"\n                        v-model=\"password\"\n                        required\n                      />\n                    </CInputGroup>\n\n                    <CRow>\n                      <CCol :xs=\"6\">\n                        <CButton color=\"primary\" class=\"px-4\" type=\"submit\"> Login </CButton>\n                      </CCol>\n                    </CRow>\n                  </div>\n\n                </CForm>\n              </CCardBody>\n            </CCard>\n\n\n        </CCol>\n      </CRow>\n    </CContainer>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\"\n  import vueCookies from 'vue-cookies'\n  import vueRouter from 'vue-router'\n  // import {storeUserRole} from '@/store/store_userrole'\n\n  import ccMainLogo from '@/assets/globetrotter/logo-with-title.png'\n\n  export default {\n    name: 'Login',\n\n    data: () => {\n\n      return {\n\n        // headerToken\n        APIHOST: process.env.VUE_APP_APIS_HOST === undefined ? '' : process.env.VUE_APP_APIS_HOST,\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json; charset=utf-8',\n        },\n\n        // markers\n        validatedCustom01: null,\n\n        // data models\n        username: null,\n        password: null,\n        userrole: null,\n\n        //flags\n        checkCredentialsSpin: false,\n        // checkCredentialsSpin: true,\n\n\n      } // end data return\n    }, // end data\n\n\n    methods: {\n      handleSubmitCustom01(event) {\n        const form = event.currentTarget\n        if (form.checkValidity() === false) {\n          event.preventDefault()\n          event.stopPropagation()\n        } else {\n           this.userLogin()\n          // this.redirect_dashboard()\n        }\n        this.validatedCustom01 = true\n      },\n\n      userLogin() {\n\n        let login_url = this.APIHOST + '/mainapp/userLogin'\n        let profileUrl = this.APIHOST + '/mainapp/getUserDetails'\n\n\n        let data = JSON.stringify({\n          'client_id': this.username,\n          'client_secret': this.password\n        });\n\n        let config = {\n          method: 'post',\n          maxBodyLength: Infinity,\n          url: login_url,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          data : data\n        };\n        // console.log(config)\n\n        axios.request(config)\n        .then((response) => {\n          if (response.status == 200) {\n            // save in cookie\n            // https://www.npmjs.com/package/vue-cooki\n            let accessToken = response.data.access_token\n            if (accessToken === undefined) {\n              console.error(\"Invalid credentials\")\n\n            } else {\n              vueCookies.set('accessToken', accessToken, '1d')\n\n              // Get Profile Details and save it\n              let profileConfig = {\n                method: 'get',\n                maxBodyLength: Infinity,\n                url: profileUrl,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': accessToken\n                }\n              }\n              axios.request(profileConfig)\n                .then((response) => {\n                  console.log(response.data)\n                  vueCookies.set('userDetails', response.data.user)\n\n                  this.checkCredentialsSpin = true\n                  setTimeout(this.redirect_dashboard, 3000)\n                })\n                .catch((error) => {\n                  console.log(error)\n                })\n\n\n              // land to dashboard\n\n            }\n            //this.$router.push('/dashboard')\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n\n\n\n\n      }, // end user login\n\n      redirect_dashboard() {\n        this.$router.push('/dashboard')\n      },\n\n    }, // end methods\n\n\n    beforeCreate() {\n\n    }, // end beforeCreate\n\n    created() {\n      let access_token = vueCookies.get('accessToken')\n      // validate access token\n      if (access_token != null) {\n        //this.$router.push('/dashboard')\n        // this.checkCredentialsSpin = true\n        this.redirect_dashboard()\n      } else {\n        this.checkCredentialsSpin = false\n      }\n    }, // end created\n\n    setup() {\n      return {\n        ccMainLogo\n      }\n    }, // end setup\n\n  } // end export\n</script>\n\n","import { render } from \"./Login.vue?vue&type=template&id=6d6497da\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/cprakashagr/Workspace/GlobetrotterFinance/kbBot4Laws/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_CContainer","_component_CRow","_component_CCol","xs","xm","xl","_component_CCard","_component_CCardBody","_component_CForm","novalidate","validated","_ctx","onSubmit","$options","src","$setup","alt","checkCredentialsSpin","_hoisted_4","_component_CSpinner","color","size","_hoisted_6","_component_CInputGroup","_component_CInputGroupText","_component_CIcon","icon","_component_CFormInput","placeholder","autocomplete","required","type","_component_CButton","name","data","APIHOST","process","headers","validatedCustom01","username","password","userrole","methods","handleSubmitCustom01","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","this","userLogin","login_url","profileUrl","JSON","stringify","config","method","maxBodyLength","Infinity","url","axios","then","response","status","accessToken","access_token","undefined","console","error","vueCookies","profileConfig","log","user","setTimeout","redirect_dashboard","catch","$router","push","beforeCreate","created","setup","ccMainLogo","__exports__","render"],"sourceRoot":""}