"use strict";(self["webpackChunk_coreui_coreui_pro_vue_admin_template"]=self["webpackChunk_coreui_coreui_pro_vue_admin_template"]||[]).push([[779],{1779:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=a(3396),l=a(9242);const n={class:"bg-light min-vh-100 d-flex flex-row align-items-center bg-pattern3-repeat"},o=["src"],r={key:0},i=(0,s._)("p",{class:"text-medium-emphasis mb-3"},"Checking credentials",-1),u={key:1},d=(0,s._)("p",{class:"text-medium-emphasis mb-3"},"Enter credentials to continue",-1);function c(e,t,a,c,m,p){const h=(0,s.up)("CSpinner"),C=(0,s.up)("CIcon"),_=(0,s.up)("CInputGroupText"),f=(0,s.up)("CFormInput"),g=(0,s.up)("CInputGroup"),w=(0,s.up)("CButton"),b=(0,s.up)("CCol"),k=(0,s.up)("CRow"),v=(0,s.up)("CForm"),W=(0,s.up)("CCardBody"),y=(0,s.up)("CCard"),S=(0,s.up)("CContainer");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"justify-content-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{xs:12,xm:4,xl:4},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"p-4 customcard-border-primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"needs-validation",novalidate:"",validated:e.validatedCustom01,onSubmit:[p.handleSubmitCustom01,(0,l.iM)((e=>{}),["prevent"])]},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"d-block w-100 mb-4",src:c.ccMainLogo,alt:"Globetrotter finance logo"},null,8,o),1==this.checkCredentialsSpin?((0,s.wg)(),(0,s.iD)("div",r,[i,(0,s.Wm)(h,{color:"primary",size:"sm"})])):(0,s.kq)("",!0),0==this.checkCredentialsSpin?((0,s.wg)(),(0,s.iD)("div",u,[d,(0,s.Wm)(g,{class:"mb-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:"cil-user"})])),_:1}),(0,s.Wm)(f,{placeholder:"Username",autocomplete:"username",modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),required:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(g,{class:"mb-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:"cil-lock-locked"})])),_:1}),(0,s.Wm)(f,{type:"password",placeholder:"Password",autocomplete:"current-password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),required:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{xs:6},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{color:"primary",class:"px-4",type:"submit"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Login ")])),_:1})])),_:1})])),_:1})])):(0,s.kq)("",!0)])),_:1},8,["validated","onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])}a(7658);var m=a(4311),p=a(5269),h=a.n(p),C=a(5301),_={name:"Login",data:()=>({APIHOST:"https://saras-ind-prod.globetrotter.finance",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json; charset=utf-8"},validatedCustom01:null,username:null,password:null,userrole:null,checkCredentialsSpin:!1}),methods:{handleSubmitCustom01(e){const t=e.currentTarget;!1===t.checkValidity()?(e.preventDefault(),e.stopPropagation()):this.userLogin(),this.validatedCustom01=!0},userLogin(){let e=this.APIHOST+"/mainapp/userLogin",t=this.APIHOST+"/mainapp/getUserDetails",a=JSON.stringify({client_id:this.username,client_secret:this.password}),s={method:"post",maxBodyLength:1/0,url:e,headers:{"Content-Type":"application/json"},data:a};m.Z.request(s).then((e=>{if(200==e.status){let a=e.data.access_token;if(void 0===a)console.error("Invalid credentials");else{h().set("accessToken",a,"1d");let e={method:"get",maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json",Authorization:a}};m.Z.request(e).then((e=>{console.log(e.data),h().set("userDetails",e.data.user),this.checkCredentialsSpin=!0,setTimeout(this.redirect_dashboard,3e3)})).catch((e=>{console.log(e)}))}}})).catch((e=>{console.log(e)}))},redirect_dashboard(){this.$router.push("/dashboard")}},beforeCreate(){},created(){let e=h().get("accessToken");null!=e?this.redirect_dashboard():this.checkCredentialsSpin=!1},setup(){return{ccMainLogo:C}}},f=a(89);const g=(0,f.Z)(_,[["render",c]]);var w=g}}]);
//# sourceMappingURL=779.73e44329.js.map